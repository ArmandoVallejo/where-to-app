# Where-To ğŸ“

Where-To es una aplicaciÃ³n mÃ³vil desarrollada en React Native que permite a los estudiantes y personal del TecnolÃ³gico descubrir eventos y salones en tiempo real mediante detecciÃ³n de beacons BLE (Bluetooth Low Energy). La app detecta automÃ¡ticamente tu ubicaciÃ³n dentro del campus utilizando beacons ESP32 y te muestra informaciÃ³n relevante sobre el edificio en el que te encuentras.

## ğŸ“‹ Requisitos previos

- Node.js (v16 o superior)
- npm o yarn
- Expo CLI (`npm install -g expo-cli`)
- Cuenta de Firebase
- Dispositivo Android fÃ­sico o emulador
- (Opcional) ESP32 para beacons fÃ­sicos

## ğŸš€ InstalaciÃ³n

### 1. Clonar el repositorio

```bash
git clone https://github.com/ArmandoVallejo/where-to-app
cd where-to-app
```

### 2. Instalar dependencias

```bash
npm install
```

### 3. Configurar Firebase

#### a) Crear proyecto en Firebase

1. Ve a Firebase Console: <https://console.firebase.google.com/>
2. Crea un nuevo proyecto
3. Habilita Realtime Database
4. Ve a Project Settings y copia las credenciales

#### b) Configurar variables de entorno

Crea un archivo `.env` en la raÃ­z del proyecto con tus credenciales de Firebase:

```env
FIREBASE_API_KEY=
FIREBASE_AUTH_DOMAIN=
FIREBASE_DATABASE_URL=
FIREBASE_PROJECT_ID=
FIREBASE_STORAGE_BUCKET=
FIREBASE_MESSAGING_SENDER_ID=
FIREBASE_APP_ID=
PRODUCT_NAME=
```

#### c) Configurar reglas de Firebase

En Firebase Console, ve a Realtime Database y luego a Rules. Configura las siguientes reglas:

``` json
{
  "rules": {
    "edificios": {
      ".read": true,
      ".write": true
    },
    "users": {
      ".read": true,
      ".write": true,
      ".indexOn": ["control", "email"]
    }
  }
}
```

### 4. Ejecutar la seed

La aplicaciÃ³n incluye datos iniciales (edificios y usuario administrador) que puedes cargar ejecutando:

La seed crearÃ¡:

- Edificios de ejemplo con sus direcciones MAC de beacons
- Usuario administrador con credenciales:
  - No. Control: `11111111`
  - Password: `Hola1234#`

**Nota:** Solo necesitas ejecutar la seed una vez. DespuÃ©s de la primera ejecuciÃ³n, comenta o elimina la llamada a `runSeed()`.

### 5. Ejecutar la aplicaciÃ³n

```bash
npx expo start

npx expo run:android
```

## ğŸ“± Uso de la aplicaciÃ³n

### Login

- Ingresa con el usuario administrador (ver credenciales arriba)
- O crea una nueva cuenta desde "Create one"

### DetecciÃ³n de beacons

- La app detecta automÃ¡ticamente beacons cercanos
- Cuando te acercas a un edificio configurado, aparece un modal
- Puedes aceptar cambiar tu ubicaciÃ³n actual al edificio detectado

### NavegaciÃ³n

- Home: Ver eventos y filtrar por categorÃ­as
- Lugares: Explorar edificios del campus
- Perfil: Ver tu informaciÃ³n y cerrar sesiÃ³n

## ğŸ“‚ Estructura del proyecto

``` a
where-to-app/
â”œâ”€â”€ assets/
â”œâ”€â”€ components/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ seed.js
â”‚   â””â”€â”€ config.js
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ HomeScreen.js
â”‚   â”œâ”€â”€ LoginScreen.js
â”‚   â”œâ”€â”€ RegisterScreen.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ App.js
â”œâ”€â”€ app.json
â””â”€â”€ package.json
```

## ğŸ—„ï¸ Estructura de Firebase

``` a
firebase-database/
â”œâ”€â”€ edificios/
â”‚   â”œâ”€â”€ -xxxxx/
â”‚   â”‚   â”œâ”€â”€ mac: "76:A1:2B:7F:24:3E"
â”‚   â”‚   â””â”€â”€ name: "Centro de computo"
â”‚   â””â”€â”€ -yyyyy/
â”‚       â”œâ”€â”€ mac: "D1:09:1A:DA:9D:2E"
â”‚       â””â”€â”€ name: "Salones A-C"
â””â”€â”€ users/
    â””â”€â”€ -zzzzz/
        â”œâ”€â”€ control: "11111111"
        â”œâ”€â”€ email: "admin@tec.mx"
        â”œâ”€â”€ password: "Hola1234#"
        â”œâ”€â”€ role: "admin"
        â””â”€â”€ createdAt: "2025-01-15T..."
```
